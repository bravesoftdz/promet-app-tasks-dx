<!DOCTYPE html>
<html lang="de">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script src="../codebase/dhtmlx.js" type="text/javascript"></script>
    <link rel="STYLESHEET" type="text/css" href="../codebase/dhtmlx.css">
    <script>
      function RefreshTasks() {
        siTasks.progressOn();
        console.log("Refresh Tasks");
        gTasks.addRow(gTasks.uid(),"The Rainmaker,John Grisham,1.1.2012");
        siTasks.progressOff();
      }

      console.log("Loading Tasks Page...");
      var siTasks = window.parent.sbMain.cells('sitasks');
      var tbToolbar = siTasks.attachToolbar({
        parent:"pToolbar",
          items:[
             {id: "new", type: "button", text: "Neu", img: "fa fa-file-o"}
            ,{id: "sep1", type: "separator" }
            ,{id: "refresh", type: "button", text: "Aktualisieren", img: "fa fa-file-o"}
            //{id: "open", type: "button", img: "open.gif"},
            //{id: "autosave", type: "buttonTwoState", text: "Autosave", img: "save.gif"},
            //{id: "inp", type: "buttonInput", text: "Input"},
            //{id: "sld", type: "slider", text_min: "10 MBit", text_max: "100 MBit"},
            //{id: "info", type: "text", text: "dhtmlxToolbar Demo"}
          ],
        iconset: "awesome"
      });
      var gTasks = siTasks.attachGrid('pTasks');
      gTasks.enableAutoWidth(true);
      gTasks.enableAutoHeight(true);
      gTasks.setSizes();
      gTasks.setHeader(["Aufgabe","Projekt","Bis"]);
      gTasks.setColTypes("edtxt,co,dhxCalendar");
      var cbProject = gTasks.getCombo(2);
/*
      cbProject.attachEvent("onOpen", function(){
        //TODO:fill with first Project Items
      });
      cbProject.attachEvent("onChange", function(value, text){
        //TODO:fill with Project Items based on text
      });
*/
      gTasks.setColSorting('str,str,date');
      gTasks.enableValidation(true, false);
      gTasks.setColValidators(',,ValidDate');
      gTasks.setColumnMinWidth('100', 0);
      gTasks.setColumnMinWidth('100', 1);
      gTasks.setInitWidths('*,*,120');
      gTasks.init();
      RefreshTasks();
    </script>
</head>
<body>
  <div id="pToolbar"></div>
  <div id="pTasks"></div>
</body>
</html>
